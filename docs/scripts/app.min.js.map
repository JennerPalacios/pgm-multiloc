{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/app/app.ts","src/scripts/app/beehive.ts","src/scripts/app/gmaps.ts","src/scripts/app/hive.ts","src/scripts/app/map.ts","src/scripts/app/viewModel.ts","src/scripts/config.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","App","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","/Volumes/DATA/vhosts/pgm-multiloc/src/scripts/app/app.ts","$","_","gmaps_ts_1","Location","latitude","longitude","latLng","google","maps","LatLng","prototype","toString","lat","lng","getLatLng","Util","getHiveRadius","steps","Math","sqrt","scanRadius","getStepsToCoverRadius","radius","ceil","getBeehiveRadius","leaps","floor","hiveOverlap","getLeapsToCoverRadius","distanceBetweenHiveCenters","hexInnerRadius","locationAdjustment","GMaps","document","foundation","Foundation","Abide","validators","$el","required","parent","accountText","val","isEmpty","accountColumns","Number","split","accounts","anyWrong","some","columns","requiredWorkers","app_ts_1","hive_ts_1","ko","Beehive","options","_this","hives","observableArray","isEditingHives","coveringRadius","activeHives","computed","getActiveHives","deferEvaluation","mapObject","Circle","fillColor","fillOpacity","strokeWeight","clickable","center","editable","draggable","zIndex","map","addMapObject","generateHives","toggleActive","addListener","getRadius","newLeaps","getCenter","getHives","console","log","reset","dispose","removeMapObject","locations","getNextPoint","heading","distance","adjust","nextPoint","geometry","spherical","computeOffset","push","Hive","point","lastHiveCenter","leap","se","s","sw","nw","ne","resize","disableActive","isActive","editHives","set","fromMap","setActiveBeehive","removeListener","filter","h","config_ts_1","load_google_maps_api_1","map_ts_1","Map","default","key","config","googleMapsKey","libraries","then","googleMaps","initMap","getMap","gmap","getElementById","zoom","mapTypeControl","mapTypeControlOptions","style","MapTypeControlStyle","HORIZONTAL_BAR","position","ControlPosition","TOP_RIGHT","input","placeholder","controls","TOP_LEFT","autocomplete","places","Autocomplete","bindTo","place","getPlace","setCenter","location","setZoom","inputElement","value","String","addEventListener","geocoder","Geocoder","geo_input","alert","latlngStr","latlng","parseFloat","geocode","results","status","status_string","addBeehive","label","classList","toggle","contains","event","clearListeners","addListenerOnce","observable","hexPoints","hex","Polygon","paths","Object","defineProperty","activeListener","remove","beehive_ts_1","viewModel_ts_1","beehives","activeBeehive","sliderOptions","data","end","maxSteps","initialStart","show","reInit","on","changeSteps","removeActiveHive","forEach","vm","ViewModel","applyBindings","getElementsByTagName","beehive","eventName","handler","hide","splice","indexOf","flatten","b","rocketmapDirectory","os","subscribe","newValue","invalidFields","removeAttr","attr","serverCheckbox","is","serverNoPokemon","serverNoGyms","serverNoPokestops","serverSearchControl","serverNoFixedLocation","serverOptions","getServerOptions","alarmCheckbox","alarmConfig","alarmHost","alarmPort","alarmConfigValue","alarmHostValue","alarmPortValue","alarmOptions","getAlarmOptions","accountsPerHive","accountDirectory","scriptDelay","webhookCheckbox","snCheckbox","disableClean","webhookValue","snValue","workerNoPokemon","workerNoGyms","workerNoPokestops","workerOptions","getWorkerOptions","windowsTemplates","Templates","linuxTemplates","activeTemplates","getActiveTemplates","generateScriptPreview","generateScriptOutput","replace","isValid","handleFormInputValidation","handleFormValidation","name","target","existingIndex","type","np","ng","nk","sc","nfl","ac","ah","ap","sn","wh","dc","wnp","wng","wnk","isPreview","templates","sOptions","aOptions","wOptions","setupScript","setup","serverScript","replaceVariables","server","rocketmap-directory","server-options","alarmScript","alarm","alarm-options","workerScript","sd","worker","account-directory","workers","worker-options","index","delay","script-delay","text","variables","forOwn","RegExp","downloadFile","script","downloadScript","filename","updateAPH","trigger","coordsFile","join","blob","Blob","url","URL","createObjectURL","download","href","setTimeout","revokeObjectURL","append","dispatchEvent","MouseEvent","Template","defaultValue","isDirty","defaults"],"mappings":"CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,IAAAV,MAAA,WAAA,MAAA,YAAA,QAAAW,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAhB,GAAA,IAAAa,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAC,GAAA,kBAAAC,UAAAA,OAAA,KAAAlB,GAAAiB,EAAA,MAAAA,GAAAD,GAAA,EAAA,IAAAG,EAAA,MAAAA,GAAAH,GAAA,EAAA,IAAAI,GAAA,GAAAC,OAAA,uBAAAL,EAAA,IAAA,MAAAI,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,GAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAkB,GAAA,kBAAAD,UAAAA,QAAAF,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,GAAA,MAAAJ,OAAAe,4DAAA,SAAAR,EAAAhB,EAAAD,eCAA,IAAY0B,GAACT,EAAM,SACnBA,GAAO,kBACPA,EAAO,mBACP,IAAYU,GAACV,EAAM,UAGnBW,EAAAX,EAAoB,cAIpBY,EAAA,WAGE,QAAAA,GAAYC,EAAkBC,GAC5BvB,KAAKwB,OAAS,GAAIC,QAAOC,KAAKC,OAAOL,EAAUC,GAUnD,MAPSF,GAAAO,UAAAC,SAAP,WACE,MAAU7B,MAAKwB,OAAOM,MAAK,KAAK9B,KAAKwB,OAAOO,OAGvCV,EAAAO,UAAAI,UAAP,WACE,MAAOhC,MAAKwB,QAEhBH,IAda7B,GAAA6B,SAAQA,CAgBrB,IAAAY,GAAA,WAAA,QAAAA,MAwBA,MAnBgBA,GAAAC,cAAd,SAA4BC,GAC1B,OAASA,EAAQ,GAAKC,KAAKC,KAAK,GAAKrC,KAAKsC,WAActC,KAAKsC,YAGjDL,EAAAM,sBAAd,SAAoCC,GAClC,MAAOJ,MAAKK,MAAOD,EAASxC,KAAKsC,YAActC,KAAKsC,WAAaF,KAAKC,KAAK,GAAM,IAGrEJ,EAAAS,iBAAd,SAA+BC,EAAeR,GAC5C,MAAOC,MAAKQ,MAAO,GAAKD,EAAQ,GAAK,EAAK,KAAQV,EAAKC,cAAcC,GAASF,EAAKY,aAAeZ,EAAKC,cAAcC,IAGzGF,EAAAa,sBAAd,SAAoCN,EAAgBL,GAClD,MAAOC,MAAKK,KAAsG,IAA9FD,EAASP,EAAKC,cAAcC,KAAWF,EAAKC,cAAcC,GAASF,EAAKY,aAAe,IAAW,EAAK,IAE/GZ,EAAAc,2BAAd,SAAyCZ,GACvC,GAAIa,IAAkBb,EAAQ,IAAM,EAAInC,KAAKsC,WAAa,GAAKL,EAAKgB,kBACpE,OAAyB,GAAjBD,EAAqBf,EAAKY,aArBrBZ,EAAAK,WAAqB,GACtBL,EAAAgB,mBAA6Bb,KAAKC,KAAK,GAAKJ,EAAKK,WAAa,EAC9DL,EAAAY,YAAuBZ,EAAKK,WAAa,EAAoD,GAA7CL,EAAKK,WAAaL,EAAKgB,oBAqBvFhB,IAxBazC,GAAAyC,KAAIA,CA0BjB,IAAAhC,GAAA,WAEE,QAAAA,KACc,GAAImB,GAAA8B,KAChBhC,GAAEiC,UAAUC,aAEZC,WAAWC,MAAgB,SAAEC,WAA2B,eAAI,SAACC,EAAKC,EAAUC,GAC1E,GAAIC,GAAczC,EAAE,aAAa0C,KACjC,KAAKH,EAAU,OAAO,CACtB,IAAIA,GAAYtC,EAAE0C,QAAQF,GACxB,OAAO,CAGT,IAAIG,GAAyBC,OAAO7C,EAAE,mBAAmB0C,MAAMI,MAAM,KAAKhD,QACtEiD,EAAqBN,EAAYK,MAAM,MAEvCE,EAAW/C,EAAEgD,KAAKF,EAAU,SAACtD,GAC/B,GAAIyD,GAAkBzD,EAAEqD,MAAM,KAAKhD,MACnC,OAAO8C,KAAmBM,GAG5B,QAAQF,GAGVb,WAAWC,MAAgB,SAAEC,WAA2B,eAAI,SAACC,EAAKC,EAAUC,GAC1E,GAAIW,GAAkBN,OAAO7C,EAAE,YAAY0C,OAASG,OAAO7C,EAAE,UAAU0C,OACnED,EAAczC,EAAE,aAAa0C,KACjC,IAAIzC,EAAE0C,QAAQF,GACZ,OAAO,CAGT,IAAIM,GAAWN,EAAYK,MAAM,MAAMhD,MAEvC,OAAOiD,IAAYI,GAGzB,MAAApE,KApCaT,GAAAS,IAAGA,oRCnDhB,IAAAqE,GAAA7D,EAA6B,YAE7B8D,EAAA9D,EAAiC,aAErB+D,EAAE/D,EAAM,YACRU,EAACV,EAAM,UAQnBgE,EAAA,WAUE,QAAAA,GAAaC,GAVf,GAAAC,GAAA3E,IAWIA,MAAK0E,QAAUA,EACf1E,KAAK4E,MAAQJ,EAAGK,oBAChB7E,KAAK8E,gBAAiB,EACtB9E,KAAK+E,eAAiBT,EAAArC,KAAKS,iBAAiB1C,KAAK0E,QAAQ/B,MAAO3C,KAAK0E,QAAQvC,OAE7EnC,KAAKgF,YAAcR,EAAGS,SAAS,WAAM,MAAAN,GAAKO,kBAAkBlF,MAAQmF,iBAAiB,IAErFnF,KAAKoF,UAAY,GAAI3D,QAAOC,KAAK2D,QAC/B7C,OAAQxC,KAAK+E,eACbO,UAAW,UACXC,YAAa,EACbC,aAAc,EACdC,WAAW,EACXC,OAAQ1F,KAAK0E,QAAQgB,OAAO1D,YAC5B2D,UAAU,EACVC,WAAW,EACXC,OAAQ,IAGV7F,KAAK0E,QAAQoB,IAAIC,aAAa/F,KAAKoF,WAEnCpF,KAAKgG,gBACLhG,KAAKiG,eAELjG,KAAK0E,QAAQoB,IAAII,YAAYlG,KAAKoF,UAAW,QAAS,WAAM,MAAAT,GAAKsB,iBAEjEjG,KAAK0E,QAAQoB,IAAII,YAAYlG,KAAKoF,UAAW,iBAAkB,WAC7DT,EAAKI,eAAiBJ,EAAKS,UAAUe,WAErC,IAAIC,GAAW9B,EAAArC,KAAKa,sBAAsB6B,EAAKI,eAAgBJ,EAAKD,QAAQvC,MACxEwC,GAAKD,QAAQ/B,QAAUyD,IACzBzB,EAAKD,QAAQ/B,MAAQyD,EACrBzB,EAAKqB,mBAKThG,KAAK0E,QAAQoB,IAAII,YAAYlG,KAAKoF,UAAW,iBAAkB,WAC7D,GAAIM,GAASf,EAAKS,UAAUiB,WAC5B1B,GAAKD,QAAQgB,OAAS,GAAIpB,GAAAjD,SAASqE,EAAO5D,MAAO4D,EAAO3D,OACxD4C,EAAKqB,kBA8GX,MA1GSvB,GAAA7C,UAAA0E,SAAP,WAEE,MADAC,SAAQC,IAAI,qBAAqBxG,KAAK0E,QAAQgB,OAAO7D,YAC9C7B,KAAK4E,SAGPH,EAAA7C,UAAA6E,MAAP,SAAaC,GAAA,SAAAA,IAAAA,GAAA,EAEX,KAAK,GAAInG,GAAI,EAAGA,EAAIP,KAAK4E,QAAQ5D,OAAQT,IACvCP,KAAK4E,QAAQrE,GAAGkG,OAGlBzG,MAAK4E,UAED8B,IACF1G,KAAKoF,UAAYpF,KAAK0E,QAAQoB,IAAIa,gBAAgB3G,KAAKoF,aAInDX,EAAA7C,UAAAoE,cAAR,WAAA,GAAArB,GAAA3E,IACEA,MAAKyG,OAEL,IAAIG,MACA7D,EAA6BuB,EAAArC,KAAKc,2BAA2B/C,KAAK0E,QAAQvC,OAE1E0E,EAAe,SAAC/F,EAAGgG,EAASC,EAAuCC,GAAvC,SAAAD,IAAAA,EAAAhE,GAAuC,SAAAiE,IAAAA,GAAA,EACrE,IAAIC,GAAYxF,OAAOC,KAAKwF,SAASC,UAAUC,cAActG,EAAGiG,EAAUD,EAK1E,OAJIE,KACFC,EAAYxF,OAAOC,KAAKwF,SAASC,UAAUC,cAAcH,EAAW3C,EAAArC,KAAKgB,mBAAoB6D,EAAU,KAEzGF,EAAUS,KAAK,GAAI9C,GAAA+C,MAAqB5B,OAAQ,GAAIpB,GAAAjD,SAAS4F,EAAUnF,MAAOmF,EAAUlF,OAAQI,MAAOwC,EAAKD,QAAQvC,MAAO2D,IAAKnB,EAAKD,QAAQoB,OACtImB,GAGLM,EAA4BvH,KAAK0E,QAAQgB,OAAO1D,WACpDuF,GAAQV,EAAaU,EAAO,EAAG,GAAG,GAClCvH,KAAKwH,eAAiBD,CAEtB,KAAK,GAAIE,GAAO,EAAGA,GAAQzH,KAAK0E,QAAQ/B,MAAO8E,IAAQ,CACrDF,EAAQV,EAAa7G,KAAKwH,eAAgB,EAAGzE,GAE7C/C,KAAKwH,eAAiBD,CAEtB,KAAK,GAAIG,GAAK,EAAGA,EAAKD,EAAMC,IAC1BH,EAAQV,EAAaU,EAAO,IAG9B,KAAK,GAAII,GAAI,EAAGA,EAAIF,EAAME,IACxBJ,EAAQV,EAAaU,EAAO,IAG9B,KAAK,GAAIK,GAAK,EAAGA,EAAKH,EAAMG,IAC1BL,EAAQV,EAAaU,EAAO,IAG9B,KAAK,GAAIM,GAAK,EAAGA,EAAKJ,EAAMI,IAC1BN,EAAQV,EAAaU,EAAO,IAG9B,KAAK,GAAInH,GAAI,EAAGA,EAAIqH,EAAMrH,IACxBmH,EAAQV,EAAaU,EAAO,EAG9B,KAAK,GAAIO,GAAK,EAAGA,EAAKL,EAAMK,IAC1BP,EAAQV,EAAaU,EAAO,IAKhC,MADAvH,MAAK4E,MAAMgC,GACJ5G,KAAK4E,SAGPH,EAAA7C,UAAAmG,OAAP,SAAc5F,GACZnC,KAAK0E,QAAQvC,MAAQA,EACrBnC,KAAK0E,QAAQ/B,MAAQ2B,EAAArC,KAAKa,sBAAsB9C,KAAK+E,eAAgB/E,KAAK0E,QAAQvC,OAClFnC,KAAKgG,iBAGAvB,EAAA7C,UAAAoG,cAAP,WACEhI,KAAKiI,UAAW,EACZjI,KAAK8E,gBACP9E,KAAKkI,YAEPlI,KAAKoF,UAAU+C,IAAI,cAAe,IAG7B1D,EAAA7C,UAAAqE,aAAP,SAAoBmC,GAAA,SAAAA,IAAAA,GAAA,GAClBpI,KAAKiI,UAAYjI,KAAKiI,SACtBjI,KAAKoF,UAAU+C,IAAI,cAAenI,KAAKiI,SAAW,GAAM,GAExDjI,KAAK0E,QAAQoB,IAAIuC,iBAAiBrI,KAAKiI,SAAWjI,KAAO,OAGpDyE,EAAA7C,UAAAsG,UAAP,WACElI,KAAK8E,gBAAkB9E,KAAK8E,cAE5B,KAAK,GAAIvE,GAAI,EAAGA,EAAIP,KAAK4E,QAAQ5D,OAAQT,IACvCP,KAAK8E,eAAiB9E,KAAK4E,QAAQrE,GAAG2F,cAAgBlG,KAAK4E,QAAQrE,GAAG+H,gBAGxEtI,MAAKoF,UAAU+C,IAAI,SAAUnI,KAAK8E,eAAiB,EAAI,GACvD9E,KAAKoF,UAAU+C,IAAI,cAAenI,KAAK8E,eAAiB,EAAI,KAGtDL,EAAA7C,UAAAsD,eAAR,WACE,MAAO/D,GAAEoH,OAAOvI,KAAK4E,QAAS,SAAC4D,GAAM,MAAAA,GAAEP,cAE3CxD,IAjKajF,GAAAiF,QAAOA,kRCdpB,IAAAgE,GAAAhI,EAAqB,gBAErBiI,EAAAjI,EAA8B,wBAC9B6D,EAAA7D,EAAuB,YACvBkI,EAAAlI,EAA+B,YAG/ByC,EAAA,WAKI,QAAAA,KALJ,GAAAyB,GAAA3E,IAMQA,MAAK8F,IAAM,GAAI6C,GAAAC,IACfF,EAAAG,SACIC,IAAKL,EAAAM,OAAOC,cACZC,WAAY,SAAU,cACvBC,KAAK,SAACC,GACLxE,EAAKyE,YAoFjB,MAhFWlG,GAAAtB,UAAAyH,OAAP,WACI,MAAOrJ,MAAK8F,KAGR5C,EAAAtB,UAAAwH,QAAR,WAAA,GAAAzE,GAAA3E,IACIA,MAAKsJ,KAAO,GAAI7H,QAAOC,KAAKkH,IAAIzF,SAASoG,eAAe,QACpDC,KAAMf,EAAAM,OAAOS,KACb9D,OAAQ,GAAIjE,QAAOC,KAAKC,OAAO8G,EAAAM,OAAOzH,SAAUmH,EAAAM,OAAOxH,WACvDkI,gBAAgB,EAChBC,uBACIC,MAAOlI,OAAOC,KAAKkI,oBAAoBC,eACvCC,SAAUrI,OAAOC,KAAKqI,gBAAgBC,YAI9C,IAAIC,GAAQ9G,SAASoG,eAAe,YACjBpG,UAASoG,eAAe,UAAWW,YAAc,IAAMzB,EAAAM,OAAOzH,SAAW,IAAMmH,EAAAM,OAAOxH,UAAY,IAErHvB,KAAKsJ,KAAKa,SAAS1I,OAAOC,KAAKqI,gBAAgBK,UAAU/C,KAAKlE,SAASoG,eAAe,uBAGtF,IAAIc,GAAe,GAAI5I,QAAOC,KAAK4I,OAAOC,aAAaN,EACvDI,GAAaG,OAAO,SAAUxK,KAAKsJ,MAEnCe,EAAanE,YAAY,gBAAiB,WACtC,GAAIuE,GAAQJ,EAAaK,UACzB,IAAID,EAAMvD,SAAU,CAChBvC,EAAK2E,KAAKqB,UAAUF,EAAMvD,SAAS0D,UACnCjG,EAAK2E,KAAKuB,QAAQ,GAClB,IAAIC,GAAiC3H,SAASoG,eAAe,SAC7DuB,GAAaC,MAAQC,OAAOP,EAAMvD,SAAS0D,SAAS9I,OAAS,IAAMkJ,OAAOP,EAAMvD,SAAS0D,SAAS7I,UAI1GoB,SAASoG,eAAe,UAAU0B,iBAAiB,QAAS,WACxDtG,EAAKuG,SAAW,GAAIzJ,QAAOC,KAAKyJ,QAEhC,IAAIC,GAAYjI,SAASoG,eAAe,SACxC,KAAI6B,EAAUL,MAEV,WADAlL,QAAOwL,MAAM,kEAIjB,IAAIC,GAAYF,EAAUL,MAAM/G,MAAM,IAAK,GACvCuH,GAAUzJ,IAAK0J,WAAWF,EAAU,IAAKvJ,IAAKyJ,WAAWF,EAAU,IAEvE3G,GAAKuG,SAASO,SAASb,SAAYW,GAAS,SAACG,EAASC,GAClD,GAAIC,GAAwBZ,OAAOW,EACb,QAAlBC,EACEF,EAAQ,IACV/G,EAAK2E,KAAKuB,QAAQ,IAClBlG,EAAK2E,KAAKqB,UAAUY,GACpB5G,EAAKmB,IAAI+F,WAAW,GAAIvH,GAAAjD,SAASmK,WAAWF,EAAU,IAAKE,WAAWF,EAAU,OAEhFzL,OAAOwL,MAAM,qBAGfxL,OAAOwL,MAAM,2BAA6BM,OAKpDxI,SAASoG,eAAe,mBAAmB0B,iBAAiB,QAAS,WACjE,GAAIa,GAAQ3I,SAASoG,eAAe,eACpCuC,GAAMC,UAAUC,OAAO,eACnBF,EAAMC,UAAUE,SAAS,eACzBtH,EAAK2E,KAAKpD,YAAY,QAAS,SAACgG,GAC5BvH,EAAKmB,IAAI+F,WAAW,GAAIvH,GAAAjD,SAAS6K,EAAM1K,OAAOM,MAAOoK,EAAM1K,OAAOO,QAClE4C,EAAK2E,KAAKqB,WAAW7I,IAAKoK,EAAM1K,OAAOM,MAAOC,IAAKmK,EAAM1K,OAAOO,UAGpEN,OAAOC,KAAKwK,MAAMC,eAAexH,EAAK2E,KAAM,WAIpD7H,OAAOC,KAAKwK,MAAME,gBAAgBpM,KAAKsJ,KAAM,OAAQ,WACjD3E,EAAKmB,IAAIsD,SAAuBE,KAAM3E,EAAK2E,UAIvDpG,IA/Fa1D,GAAA0D,MAAKA,kWCPlB,IAAAoB,GAAA7D,EAA6B,YAGjB+D,EAAE/D,EAAM,YAQpB6G,EAAA,WAUE,QAAAA,GAAY5C,GACV1E,KAAK0E,QAAUA,EACf1E,KAAKiI,SAAWzD,EAAG6H,YAAW,EAE9B,IAAI3G,GAAS1F,KAAK0E,QAAQgB,OAAO1D,YAC7BQ,EAAS8B,EAAArC,KAAKC,cAAclC,KAAK0E,QAAQvC,OAEzCiF,EAAgB3F,OAAOC,KAAKwF,SAASC,UAAUC,cAE/CkF,GACFlF,EAAc1B,EAAQlD,EAAQ,IAC9B4E,EAAc1B,EAAQlD,EAAQ,IAC9B4E,EAAc1B,EAAQlD,EAAQ,KAC9B4E,EAAc1B,EAAQlD,EAAQ,KAC9B4E,EAAc1B,EAAQlD,EAAQ,KAC9B4E,EAAc1B,EAAQlD,EAAQ,MAG5B+J,EAAM,GAAI9K,QAAOC,KAAK8K,SACxBC,MAAOH,EACP/G,YAAa,GACbC,aAAc,EACdK,OAAQ,GAGV7F,MAAKoF,UAAYmH,EACjBvM,KAAKiG,eACLjG,KAAK0E,QAAQoB,IAAIC,aAAawG,GAuBlC,MAtDEG,QAAAC,eAAIrF,EAAA1F,UAAA,aAAJ,WACE,MAAO5B,MAAK0E,QAAQvC,uCAiCfmF,EAAA1F,UAAA6E,MAAP,WACEzG,KAAKoF,UAAYpF,KAAK0E,QAAQoB,IAAIa,gBAAgB3G,KAAKoF,YAGlDkC,EAAA1F,UAAAqE,aAAP,WACEjG,KAAKiI,UAAUjI,KAAKiI,YACpBjI,KAAKoF,UAAU+C,IAAI,YAAanI,KAAKiI,WAAa,OAAS,SAGtDX,EAAA1F,UAAAsE,YAAP,WAAA,GAAAvB,GAAA3E,IACEA,MAAK4M,eAAiBnL,OAAOC,KAAKwK,MAAMhG,YAAYlG,KAAKoF,UAAW,QAAS,WAAM,MAAAT,GAAKsB,kBAGnFqB,EAAA1F,UAAA0G,eAAP,WACEtI,KAAK4M,eAAeC,UAGfvF,EAAA1F,UAAAyE,UAAP,WACE,MAAOrG,MAAK0E,QAAQgB,QAExB4B,IA5Da9H,GAAA8H,KAAIA,wLCXjB,IAAAmB,GAAAhI,EAAqB,gBAErBqM,EAAArM,EAAuC,gBAC3BS,EAACT,EAAM,UACnBsM,EAAAtM,EAAwB,kBAGZ+D,EAAE/D,EAAM,YACRU,EAACV,EAAM,UAMnBmI,EAAA,WAQE,QAAAA,KARF,GAAAjE,GAAA3E,IASIA,MAAKgN,SAAWxI,EAAGK,oBACnB7E,KAAKiN,cAAgB,KAErBjN,KAAKmC,MAAQsG,EAAAM,OAAO5G,MAEpBnC,KAAKgF,YAAcR,EAAGS,SAAS,WAAM,MAAAN,GAAKO,mBAoF9C,MAjFS0D,GAAAhH,UAAAwH,QAAP,SAAe1E,GAAf,GAAAC,GAAA3E,IACEA,MAAK0E,QAAUA,CACf,IAAIwI,GAAgBhM,EAAE,4BAA4BiM,KAAK,YAAYzI,OACnEwI,GAAcE,IAAM3E,EAAAM,OAAOsE,SAC3BH,EAAcI,aAAe7E,EAAAM,OAAO5G,MAEpCjB,EAAE,wBAAwBqM,OAC1BlK,WAAWmK,QAAQ,WAEnBtM,EAAE,4BAA4BuM,GAAG,kBAAmB,SAACtN,GAAM,MAAAwE,GAAK+I,YAAYvN,KAC5Ee,EAAE,WAAWuM,GAAG,QAAS,WAAM,MAAA9I,GAAKgJ,qBACpCzM,EAAE,eAAeuM,GAAG,QAAS,WAAM,MAAA9I,GAAKuD,cACxChH,EAAE,wBAAwBuM,GAAG,iBAAkB,WAC7CtM,EAAEyM,QAAQ1M,EAAE,wBAAyB,gBAAiB,SAACf,GAAM,MAAAe,GAAE,gBAAgBkC,WAAW,gBAAiBlC,EAAEf,OAE/G,IAAI0N,GAAK,GAAId,GAAAe,WAAWhI,IAAK9F,MAC7BwE,GAAGuJ,cAAcF,EAAI1K,SAAS6K,qBAAqB,QAAQ,KAGtDpF,EAAAhH,UAAAiK,WAAP,SAAkBjB,GAChB,GAAIqD,GAAU,GAAInB,GAAArI,SAA2BqB,IAAK9F,KAAMmC,MAAOnC,KAAKmC,MAAOQ,MAAO8F,EAAAM,OAAOpG,MAAO+C,OAAQkF,GACxG5K,MAAKgN,SAAS3F,KAAK4G,GACnB/M,EAAE,mBAAmBqM,QAGhB3E,EAAAhH,UAAAmE,aAAP,SAAoBX,GAChBA,EAAU+C,IAAI,MAAOnI,KAAK0E,QAAQ4E,OAG/BV,EAAAhH,UAAA+E,gBAAP,SAAuBvB,GAGnB,MAFAA,GAAU+C,IAAI,MAAO,MACrB/C,EAAY,MAITwD,EAAAhH,UAAAsE,YAAP,SAAmBd,EAAkC8I,EAAmBC,GACtE1M,OAAOC,KAAKwK,MAAMhG,YAAYd,EAAW8I,EAAWC,IAG9CvF,EAAAhH,UAAA8L,YAAR,SAAoBxB,GAClBlM,KAAKmC,MAAQ4B,OAAO7C,EAAE,UAAU0C,OAEL,OAAvB5D,KAAKiN,gBACPjN,KAAKiN,cAAclF,OAAO/H,KAAKmC,OAC/BjB,EAAE,mBAAmBkN,SAGjBxF,EAAAhH,UAAA+L,iBAAR,WAC6B,OAAvB3N,KAAKiN,gBACPjN,KAAKiN,cAAcxG,OAAM,GACzBzG,KAAKgN,SAASqB,OAAOrO,KAAKgN,SAASsB,QAAQtO,KAAKiN,eAAgB,GAChEjN,KAAKiN,cAAgB,KACrB/L,EAAE,WAAWkN,OAEkB,IAA3BpO,KAAKgN,WAAWhM,QAClBE,EAAE,mBAAmBkN,SAKpBxF,EAAAhH,UAAAyG,iBAAP,SAAwB4F,GACK,OAAvBjO,KAAKiN,eACPjN,KAAKiN,cAAcjF,gBAEL,OAAZiG,GACF/M,EAAE,WAAWqM,OACbrM,EAAE,eAAeqM,SAEjBrM,EAAE,WAAWkN,OACblN,EAAE,eAAekN,QAEnBpO,KAAKiN,cAAgBgB,GAGhBrF,EAAAhH,UAAAsG,UAAP,WACElI,KAAKiN,cAAc/E,aAGbU,EAAAhH,UAAAsD,eAAR,WACE,MAAO/D,GAAEoN,QAAQpN,EAAE2E,IAAI9F,KAAKgN,WAAY,SAACwB,GAAM,MAAAA,GAAExJ,kBAErD4D,IAlGapJ,GAAAoJ,IAAGA,iYCZhB,IAAAH,GAAAhI,EAAuC,gBAE3BS,EAACT,EAAM,UACP+D,EAAE/D,EAAM,YACRU,EAACV,EAAM,UAKnBqN,EAAA,WA+CI,QAAAA,GAAYpJ,GA/ChB,GAAAC,GAAA3E,IAgDQA,MAAK0E,QAAUA,EACf1E,KAAKgF,YAAcR,EAAGS,SAAS,WAAM,MAAAN,GAAKO,mBAC1ClF,KAAKyO,mBAAqBjK,EAAG6H,WAAW5D,EAAAM,OAAO0F,oBAE/CzO,KAAK0O,GAAKlK,EAAG6H,WAAW5D,EAAAM,OAAO2F,IAC/B1O,KAAK0O,GAAGC,UAAU,SAACC,GACfjK,EAAKkK,kBAEa,YAAdlK,EAAK+J,KACLxN,EAAE,wBAAwB4N,WAAW,qBAGrC5N,EAAE,wBAAwB6N,KAAK,oBAAqB,IAGxD5N,EAAEyM,QAAQ1M,EAAE,wBAAyB,gBAAiB,SAACf,GAAM,MAAAe,GAAE,gBAAgBkC,WAAW,gBAAiBlC,EAAEf,QAGjHH,KAAKgP,eAAiBxK,EAAG6H,WAAWnL,EAAE,mBAAmB+N,GAAG,aAC5DjP,KAAKkP,gBAAkB1K,EAAG6H,WAAWnL,EAAE,eAAe+N,GAAG,aACzDjP,KAAKmP,aAAe3K,EAAG6H,WAAWnL,EAAE,YAAY+N,GAAG,aACnDjP,KAAKoP,kBAAoB5K,EAAG6H,WAAWnL,EAAE,iBAAiB+N,GAAG,aAC7DjP,KAAKqP,oBAAsB7K,EAAG6H,WAAWnL,EAAE,mBAAmB+N,GAAG,aACjEjP,KAAKsP,sBAAwB9K,EAAG6H,WAAWnL,EAAE,sBAAsB+N,GAAG,aACtEjP,KAAKuP,cAAgB/K,EAAGS,SAAS,WAAM,MAAAN,GAAK6K,mBAAmB3N,aAE/D7B,KAAKyP,cAAgBjL,EAAG6H,WAAWnL,EAAE,kBAAkB+N,GAAG,aAC1DjP,KAAK0P,YAAclL,EAAG6H,WAAWnL,EAAE,iBAAiB+N,GAAG,aACvDjP,KAAK2P,UAAYnL,EAAG6H,WAAWnL,EAAE,eAAe+N,GAAG,aACnDjP,KAAK4P,UAAYpL,EAAG6H,WAAWnL,EAAE,eAAe+N,GAAG,aACnDjP,KAAK6P,iBAAmBrL,EAAG6H,WAAW,sBACtCrM,KAAK8P,eAAiBtL,EAAG6H,WAAW,aACpCrM,KAAK+P,eAAiBvL,EAAG6H,WAAW,KACpCrM,KAAKgQ,aAAexL,EAAGS,SAAS,WAAM,MAAAN,GAAKsL,kBAAkBpO,aAE7D7B,KAAKkQ,gBAAkB1L,EAAG6H,WAAW,GACrCrM,KAAKmQ,iBAAmB3L,EAAG6H,WAAW5D,EAAAM,OAAOoH,kBAC7CnQ,KAAKoQ,YAAc5L,EAAG6H,WAAW5D,EAAAM,OAAOqH,aAExCpQ,KAAKqQ,gBAAkB7L,EAAG6H,WAAWnL,EAAE,qBAAqB+N,GAAG,aAC/DjP,KAAKsQ,WAAa9L,EAAG6H,WAAWnL,EAAE,gBAAgB+N,GAAG,aACrDjP,KAAKuQ,aAAe/L,EAAG6H,WAAWnL,EAAE,kBAAkB+N,GAAG,aACzDjP,KAAKwQ,aAAehM,EAAG6H,WAAW,yBAClCrM,KAAKyQ,QAAUjM,EAAG6H,WAAW,eAC7BrM,KAAK0Q,gBAAkBlM,EAAG6H,WAAWnL,EAAE,sBAAsB+N,GAAG,aAChEjP,KAAK2Q,aAAenM,EAAG6H,WAAWnL,EAAE,mBAAmB+N,GAAG,aAC1DjP,KAAK4Q,kBAAoBpM,EAAG6H,WAAWnL,EAAE,wBAAwB+N,GAAG,aACpEjP,KAAK6Q,cAAgBrM,EAAGS,SAAS,WAAM,MAAAN,GAAKmM,mBAAmBjP,aAE/D7B,KAAK+Q,iBAAmB,GAAIC,GAAUvI,EAAAM,OAAOgI,kBAC7C/Q,KAAKiR,eAAiB,GAAID,GAAUvI,EAAAM,OAAOkI,gBAC3CjR,KAAKkR,gBAAkB1M,EAAGS,SAAS,WAAM,MAAAN,GAAKwM,uBAE9CnR,KAAKoR,sBAAwB5M,EAAGS,SAAS,WAAM,MAAAN,GAAK0M,sBAAqB,GAAMC,QAAQ,MAAO,YAE9FtR,KAAK6O,cAAgBrK,EAAGK,oBACxB7E,KAAKuR,QAAU/M,EAAGS,SAAS,WAAM,MAAgC,KAAhCN,EAAKkK,gBAAgB7N,SACtDhB,KAAKuR,QAAQ5C,UAAU,SAACC,GACpBA,EAAW1N,EAAE,aAAaqM,OAASrM,EAAE,aAAakN,SAElDpO,KAAKuR,SACLrQ,EAAE,aAAaqM,OAGnBrM,EAAEiC,UAAUsK,GAAG,kCAAmC,SAAEtN,GAAM,MAAAwE,GAAK6M,0BAA0BrR,KACzFe,EAAEiC,UAAUsK,GAAG,0CAA2C,SAAEtN,GAAM,MAAAwE,GAAK8M,qBAAqBtR,KAwJpG,MArJY2N,GAAAlM,UAAA4P,0BAAR,SAAkCrR,GAC9B,GAAIuR,GAAOxQ,EAAEf,EAAEwR,QAAQ5C,KAAK,QACxB6C,EAAgB5R,KAAK6O,cAAcP,QAAQoD,EAChC,WAAXvR,EAAE0R,KACED,GAAiB,GACjB5R,KAAK6O,cAAcR,OAAOuD,EAAe,GAIzCA,EAAgB,GAChB5R,KAAK6O,cAAcxH,KAAKqK,IAI5B5D,EAAAlM,UAAA6P,qBAAR,SAA6BtR,GACV,UAAXA,EAAE0R,MACF7R,KAAK6O,mBAILf,EAAAlM,UAAAsD,eAAR,WACI,MAAOlF,MAAK0E,QAAQoB,IAAId,eAGpB8I,EAAAlM,UAAAuP,mBAAR,WACI,MAAqB,YAAdnR,KAAK0O,KAAqB1O,KAAK+Q,iBAAmB/Q,KAAKiR,gBAG1DnD,EAAAlM,UAAA4N,iBAAR,WACI,GAAID,GAAgB,EACpB,IAAIvP,KAAKgP,eAAgB,CACrB,GAAI8C,GAAK9R,KAAKkP,kBAAoB,OAAS,GACvC6C,EAAK/R,KAAKmP,eAAiB,OAAS,GACpC6C,EAAKhS,KAAKoP,oBAAsB,OAAS,GACzC6C,EAAKjS,KAAKqP,sBAAwB,OAAS,GAC3C6C,EAAMlS,KAAKsP,wBAA0B,OAAS,EAClDC,GAAgBuC,EAAKC,EAAKC,EAAKC,EAAKC,MAEpC3C,GAAgB,EAEpB,OAAOA,IAGHzB,EAAAlM,UAAAqO,gBAAR,WACI,GAAID,GAAe,EACnB,IAAIhQ,KAAKyP,cAAe,CACpB,GAAI0C,GAAMnS,KAAK0P,eAAiB1P,KAAK6P,mBAAsB,MAAQ7P,KAAK6P,mBAAmBhO,WAAa,GACpGuQ,EAAMpS,KAAK2P,aAAe3P,KAAK8P,iBAAoB,OAAS9P,KAAK8P,iBAAiBjO,WAAa,GAC/FwQ,EAAMrS,KAAK4P,aAAe5P,KAAK+P,iBAAoB,OAAS/P,KAAK+P,iBAAiBlO,WAAa,EACnGmO,GAAemC,EAAKC,EAAKC,MAEzBrC,GAAe,EAEnB,OAAOA,IAGHlC,EAAAlM,UAAAkP,iBAAR,WACI,GAAID,GAAgB,GACZyB,EAAMtS,KAAKsQ,cAAgBtQ,KAAKyQ,UAAa,OAASzQ,KAAKyQ,UAAU5O,WAAa,GAClF0Q,EAAMvS,KAAKqQ,mBAAqBrQ,KAAKwQ,eAAkB,QAAUxQ,KAAKwQ,eAAe3O,WAAa,IAAK,GACvG2Q,EAAKxS,KAAKuQ,eAAiB,oBAAsB,GACjDkC,EAAMzS,KAAK0Q,kBAAoB,QAAU,GACzCgC,EAAM1S,KAAK2Q,eAAiB,QAAU,GACtCgC,EAAM3S,KAAK4Q,oBAAsB,QAAU,EAGnD,OAFIC,GAAgByB,EAAKE,EAAKD,EAAKE,EAAMC,EAAMC,GAK5C7E,EAAAlM,UAAAyP,qBAAP,SAA4BuB,GAAA,SAAAA,IAAAA,GAAA,EACxB,IAAIC,GAAY7S,KAAKkR,kBACjBtM,EAAQ5E,KAAKgF,aACjB,IAAIJ,EAAM5D,QAAU,EAAK,MAAO,EAmBhC,KAAK,GAlBD8R,GAAW9S,KAAKuP,gBAChBwD,EAAW/S,KAAKgQ,eAChBgD,EAAWhT,KAAK6Q,gBAEhBoC,EAAiBJ,EAAUK,MAAMnI,QAAO,KAExCoI,EAAenT,KAAKgP,oBAAqB,EAAQ,GAAQhP,KAAKoT,iBAAiBP,EAAUQ,OAAOtI,SAChGuI,sBAAuBtT,KAAKyO,qBAC5B7D,SAAUhG,EAAM,GAAGyB,YAAYxE,WAC/B0R,iBAAkBT,IACpB,KAEEU,EAAcxT,KAAKyP,mBAAoB,EAAQ,GAAQzP,KAAKoT,iBAAiBP,EAAUY,MAAM1I,SAC7F2I,gBAAiBX,IACnB,KAGEY,EAAe,GACVpT,EAAI,EAAGA,GAAKqS,EAAY,EAAIhO,EAAM5D,QAAST,IAAK,CACrD,GAAIqT,GAAKrT,EAAKqE,EAAM5D,OAAS,EAAKhB,KAAKoQ,cAAgB,CACvDuD,IAAmB3T,KAAKoT,iBAAiBP,EAAUgB,OAAO9I,SACtDuI,sBAAuBtT,KAAKyO,qBAC5BqF,oBAAqB9T,KAAKmQ,mBAC1BvF,SAAUhG,EAAMrE,GAAG8F,YAAYxE,WAC/BM,MAAOyC,EAAMrE,GAAG4B,MAChB4R,QAAS/T,KAAKkQ,kBACd8D,iBAAkBhB,EAClBiB,MAAO1T,EAAI,IACb,KAEAqT,EAAK,IACLD,GAAmB3T,KAAKoT,iBAAiBP,EAAUqB,MAAMnJ,SACrDoJ,eAAgBP,IAClB,MAKR,MAAOX,GAAcE,EAAeK,EAAcG,GAG9C7F,EAAAlM,UAAAwR,iBAAR,SAAyBgB,EAAcC,GAGnC,MAFAlT,GAAEmT,OAAOD,EAAW,SAACtJ,EAAOjC,GAAQ,MAAAsL,GAAOA,EAAK9C,QAAQ,GAAIiD,QAAO,IAAIzL,EAAG,IAAK,KAAMiC,KAE9EqJ,GAGJtG,EAAAlM,UAAA4S,aAAP,WACI,GAAIC,GAASzU,KAAKqR,sBAAqB,EACvCrR,MAAK0U,eAAeD,EAAQzU,KAAKkR,kBAAkByD,SAAS5J,UAGzD+C,EAAAlM,UAAAgT,UAAP,WACI1T,EAAE,YAAY2T,QAAQ,WAGnB/G,EAAAlM,UAAAkT,WAAP,WACI,GAAIL,GAAStT,EAAE4T,KAAK5T,EAAE2E,IAAI9F,KAAKgF,cAAe,SAACwD,GAAM,MAAAA,GAAEnC,YAAYxE,aAAa,KAChF7B,MAAK0U,eAAeD,EAAQ,eAGzB3G,EAAAlM,UAAA8S,eAAP,SAAsBD,EAAgBE,GAClC,GAAIK,GAAO,GAAIC,OAAMR,IAAW5C,KAAM,eAClCqD,EAAMrV,OAAOsV,IAAIC,gBAAgBJ,GACjCrU,EAAIO,EAAE,OAASyI,MAAO,iBAAkB0L,SAAUV,EAAUW,KAAMJ,GAEtEvU,GAAE8M,GAAG,QAAS,WACV8H,WAAW,WACP1V,OAAOsV,IAAIK,gBAAgBN,GAC3BvU,EAAEkM,UACH,MAGP3L,EAAE,gBAAgBuU,OAAO9U,GACzBA,EAAE,GAAG+U,cAAc,GAAIC,YAAW,WAE1C7H,IAzQatO,GAAAsO,UAASA,CA2QtB,IAAA8H,GAAA,WAII,QAAAA,GAAmBC,GAJvB,GAAAlR,GAAA3E,IAIuBA,MAAA6V,aAAAA,EACf7V,KAAK+K,MAAQvG,EAAG6H,WAAWwJ,GAC3B7V,KAAK8V,QAAUtR,EAAG6H,YAAW,GAE7BrM,KAAK+K,MAAM4D,UAAU,SAACC,GAAa,MAAAjK,GAAKmR,SAAQ,KAExD,MAAAF,KAVapW,GAAAoW,SAAQA,CAYrB,IAAA5E,GAAA,WAQE,QAAAA,GAAY+E,GACR/V,KAAKkT,MAAQ,GAAI0C,GAASG,EAAS7C,OACnClT,KAAKyT,MAAQ,GAAImC,GAASG,EAAStC,OACnCzT,KAAKqT,OAAS,GAAIuC,GAASG,EAAS1C,QACpCrT,KAAK6T,OAAS,GAAI+B,GAASG,EAASlC,QACpC7T,KAAKkU,MAAQ,GAAI0B,GAASG,EAAS7B,OACnClU,KAAK2U,SAAW,GAAIiB,GAASG,EAASpB,UAE5C,MAAA3D,KAhBaxR,GAAAwR,UAASA,0NClStB,IAAAjI,GAAA,WAAA,QAAAA,MA+BA,MA9BgBA,GAAAC,cAAwB,0CACxBD,EAAAzH,SAAmB,SACnByH,EAAAxH,WAAoB,UACpBwH,EAAAS,KAAe,EACfT,EAAApG,MAAgB,EAChBoG,EAAA5G,MAAgB,EAChB4G,EAAAsE,SAAmB,IAEnBtE,EAAA2F,GAAa,UACb3F,EAAAqH,YAAsB,IACtBrH,EAAA0F,mBAA6B,gBAC7B1F,EAAAoH,iBAA2B,WAE3BpH,EAAAgI,kBACZmC,MAAO,6BACPO,MAAO,4GACPJ,OAAQ,4GACRQ,OAAQ,mLACRK,MAAO,0CACPS,SAAU,kBAGE5L,EAAAkI,gBACZiC,MAAO,sBACPO,MAAO,kFACPJ,OAAQ,+EACRQ,OAAQ,uJACRK,MAAO,uBACPS,SAAU,iBAEd5L,IA/BavJ,GAAAuJ,OAAMA","file":"app.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import * as $ from 'jquery';\nimport 'jquery-migrate';\nimport 'foundation-sites';\nimport * as _ from 'lodash';\n\nimport {IMapOptions, Map} from './map.ts';\nimport {GMaps} from './gmaps.ts';\n\nimport {config} from '../config.ts';\n\nexport class Location {\n  private latLng: google.maps.LatLng;\n\n  constructor(latitude: number, longitude: number) {\n    this.latLng = new google.maps.LatLng(latitude, longitude);\n  }\n\n  public toString(): string {\n    return `${this.latLng.lat()}, ${this.latLng.lng()}`;\n  }\n\n  public getLatLng(): google.maps.LatLng {\n    return this.latLng;\n  }\n}\n\nexport class Util {\n  private static scanRadius: number = 70;\n  public static locationAdjustment: number = Math.sqrt(3) * Util.scanRadius / 2;\n  public static hiveOverlap: number = (Util.scanRadius / 2) - ((Util.scanRadius - Util.locationAdjustment) * 2);\n\n  public static getHiveRadius(steps: number): number {\n    return ((steps - 1) * Math.sqrt(3) * this.scanRadius) + this.scanRadius;\n  }\n\n  public static getStepsToCoverRadius(radius: number): number {\n    return Math.ceil(((radius - this.scanRadius) / this.scanRadius / Math.sqrt(3)) + 1);\n  }\n\n  public static getBeehiveRadius(leaps: number, steps: number): number {\n    return Math.floor((3 * (leaps - 1) / 2) - 0.5) * (Util.getHiveRadius(steps) - Util.hiveOverlap) + Util.getHiveRadius(steps);\n  }\n\n  public static getLeapsToCoverRadius(radius: number, steps: number): number {\n    return Math.ceil((((radius - Util.getHiveRadius(steps)) / (Util.getHiveRadius(steps) - Util.hiveOverlap) + 0.5) * 2 / 3) + 1);\n  }\n  public static distanceBetweenHiveCenters(steps: number): number {\n    let hexInnerRadius = (steps - 1) * (3 * this.scanRadius / 2) + Util.locationAdjustment;\n    return (hexInnerRadius * 2 - Util.hiveOverlap);\n  }\n}\n\nexport class App {\n\n  constructor() {\n    let gmaps = new GMaps();\n    $(document).foundation();\n\n    Foundation.Abide['defaults'].validators['accountColumns'] = ($el, required, parent) => {\n      let accountText = $('#accounts').val();\n      if (!required) return true;\n      if (required && _.isEmpty(accountText)) {\n        return false;\n      }\n\n      let accountColumns: Number = Number($('#accountColumns').val().split(',').length);\n      let accounts: string[] = accountText.split('\\n');\n\n      let anyWrong = _.some(accounts, (a) => {\n        let columns: Number = a.split(',').length;\n        return accountColumns !== columns;\n      });\n\n      return !anyWrong;\n    };\n\n    Foundation.Abide['defaults'].validators['enoughAccounts'] = ($el, required, parent) => {\n      let requiredWorkers = Number($('#workers').val()) * Number($('#hives').val());\n      let accountText = $('#accounts').val();\n      if (_.isEmpty(accountText)) {\n        return false;\n      }\n\n      let accounts = accountText.split('\\n').length;\n\n      return accounts >= requiredWorkers;\n    };\n  }\n}\n","import {config} from '../config.ts';\nimport {Util, Location} from './app.ts';\nimport {Map} from './map.ts';\nimport {IHiveOptions, Hive} from './hive.ts';\n\nimport * as ko from 'knockout';\nimport * as _ from 'lodash';\n\nexport interface IBeehiveOptions {\n  map: Map;\n  center: Location;\n  steps: number;\n  leaps: number;\n}\nexport class Beehive {\n  private options: IBeehiveOptions;\n  private lastHiveCenter: google.maps.LatLng;\n  private hives: KnockoutObservableArray<Hive>;\n  private mapObject: google.maps.Circle;\n  private isActive: boolean;\n  private isEditingHives: boolean;\n  private coveringRadius: number;\n  public activeHives: KnockoutComputed<Hive[]>;\n\n  constructor (options: IBeehiveOptions) {\n    this.options = options;\n    this.hives = ko.observableArray([]);\n    this.isEditingHives = false;\n    this.coveringRadius = Util.getBeehiveRadius(this.options.leaps, this.options.steps);\n\n    this.activeHives = ko.computed(() => this.getActiveHives(), this, { deferEvaluation: true });\n\n    this.mapObject = new google.maps.Circle({\n      radius: this.coveringRadius,\n      fillColor: '#0000FF',\n      fillOpacity: 0.0,\n      strokeWeight: 1,\n      clickable: true,\n      center: this.options.center.getLatLng(),\n      editable: true,\n      draggable: true,\n      zIndex: 3\n    });\n\n    this.options.map.addMapObject(this.mapObject);\n\n    this.generateHives();\n    this.toggleActive();\n\n    this.options.map.addListener(this.mapObject, 'click', () => this.toggleActive());\n\n    this.options.map.addListener(this.mapObject, 'radius_changed', () => {\n      this.coveringRadius = this.mapObject.getRadius();\n\n      let newLeaps = Util.getLeapsToCoverRadius(this.coveringRadius, this.options.steps);\n      if (this.options.leaps !== newLeaps) {\n        this.options.leaps = newLeaps;\n        this.generateHives();\n      }\n\n    });\n\n    this.options.map.addListener(this.mapObject, 'center_changed', () => {\n      let center = this.mapObject.getCenter();\n      this.options.center = new Location(center.lat(), center.lng());\n      this.generateHives();\n    });\n  }\n\n  public getHives(): Hive[] {\n    console.log(`getting hives for ${this.options.center.toString()}`);\n    return this.hives();\n  }\n\n  public reset(dispose: boolean = false): void {\n    // cleanup old hives\n    for (let i = 0; i < this.hives().length; i++) {\n      this.hives()[i].reset();\n    }\n\n    this.hives([]);\n\n    if (dispose) {\n      this.mapObject = this.options.map.removeMapObject(this.mapObject) as google.maps.Circle;\n    }\n  }\n\n  private generateHives(): Hive[] {\n    this.reset();\n\n    let locations: Hive[] = [];\n    let distanceBetweenHiveCenters = Util.distanceBetweenHiveCenters(this.options.steps);\n\n    let getNextPoint = (p, heading, distance = distanceBetweenHiveCenters, adjust = true) => {\n      let nextPoint = google.maps.geometry.spherical.computeOffset(p, distance, heading);\n      if (adjust) {\n        nextPoint = google.maps.geometry.spherical.computeOffset(nextPoint, Util.locationAdjustment, heading + 90);\n      }\n      locations.push(new Hive(<IHiveOptions>{ center: new Location(nextPoint.lat(), nextPoint.lng()), steps: this.options.steps, map: this.options.map }));\n      return nextPoint;\n    };\n\n    let point: google.maps.LatLng = this.options.center.getLatLng();\n    point = getNextPoint(point, 0, 0, false);\n    this.lastHiveCenter = point;\n\n    for (let leap = 2; leap <= this.options.leaps; leap++) {\n      point = getNextPoint(this.lastHiveCenter, 0, distanceBetweenHiveCenters);\n\n      this.lastHiveCenter = point;\n\n      for (let se = 1; se < leap; se++) {\n        point = getNextPoint(point, 120);\n      }\n\n      for (let s = 1; s < leap; s++) {\n        point = getNextPoint(point, 180);\n      }\n\n      for (let sw = 1; sw < leap; sw++) {\n        point = getNextPoint(point, 240);\n      }\n\n      for (let nw = 1; nw < leap; nw++) {\n        point = getNextPoint(point, 300);\n      }\n\n      for (let n = 1; n < leap; n++) {\n        point = getNextPoint(point, 0);\n      }\n\n      for (let ne = 2; ne < leap; ne++) {\n        point = getNextPoint(point, 60);\n      }\n    }\n\n    this.hives(locations);\n    return this.hives();\n  }\n\n  public resize(steps: number): void {\n    this.options.steps = steps;\n    this.options.leaps = Util.getLeapsToCoverRadius(this.coveringRadius, this.options.steps);\n    this.generateHives();\n  }\n\n  public disableActive(): void {\n    this.isActive = false;\n    if (this.isEditingHives) {\n      this.editHives();\n    }\n    this.mapObject.set('fillOpacity', 0);\n  }\n\n  public toggleActive(fromMap: boolean = false): void {\n    this.isActive = !this.isActive;\n    this.mapObject.set('fillOpacity', this.isActive ? 0.3 : 0);\n\n    this.options.map.setActiveBeehive(this.isActive ? this : null);\n  }\n\n  public editHives(): void {\n    this.isEditingHives = !this.isEditingHives;\n\n    for (let i = 0; i < this.hives().length; i++) {\n      this.isEditingHives ? this.hives()[i].addListener() : this.hives()[i].removeListener();\n    }\n\n    this.mapObject.set('zIndex', this.isEditingHives ? 1 : 3);\n    this.mapObject.set('fillOpacity', this.isEditingHives ? 0 : 0.3);\n  }\n\n  private getActiveHives(): Hive[] {\n    return _.filter(this.hives(), (h) => h.isActive());\n  }\n}\n","import {config} from '../config.ts';\nimport * as $ from 'jquery';\nimport loadGoogleMapsApi from 'load-google-maps-api';\nimport {Location} from './app.ts';\nimport {IMapOptions, Map} from './map.ts';\nimport {IBeehiveOptions, Beehive} from './beehive.ts';\n\nexport class GMaps {\n    private map: Map;\n    private gmap: google.maps.Map;\n    private geocoder: google.maps.Geocoder;\n\n    constructor() {\n        this.map = new Map();\n        loadGoogleMapsApi({\n            key: config.googleMapsKey,\n            libraries: ['places', 'geometry']\n        }).then((googleMaps) => {\n            this.initMap();\n        });\n    }\n\n    public getMap(): Map {\n        return this.map;\n    }\n\n    private initMap(): void {\n        this.gmap = new google.maps.Map(document.getElementById('map'), {\n            zoom: config.zoom,\n            center: new google.maps.LatLng(config.latitude, config.longitude),\n            mapTypeControl: true,\n            mapTypeControlOptions: {\n                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n                position: google.maps.ControlPosition.TOP_RIGHT\n            }\n        });\n\n        let input = document.getElementById('pac-input') as HTMLInputElement;\n        (<HTMLInputElement>document.getElementById(\"latlng\")).placeholder = \"'\" + config.latitude + \",\" + config.longitude + \"'\";\n\n        this.gmap.controls[google.maps.ControlPosition.TOP_LEFT].push(document.getElementById('custom-map-controls'));\n        /** this.gmap.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(document.getElementById('script-options')); */\n\n        let autocomplete = new google.maps.places.Autocomplete(input);\n        autocomplete.bindTo('bounds', this.gmap);\n\n        autocomplete.addListener('place_changed', () => {\n            let place = autocomplete.getPlace();\n            if (place.geometry) {\n                this.gmap.setCenter(place.geometry.location);\n                this.gmap.setZoom(10);\n                var inputElement = <HTMLInputElement>document.getElementById('latlng');\n                inputElement.value = String(place.geometry.location.lat()) + \",\" + String(place.geometry.location.lng());\n            }\n        });\n\n        document.getElementById('submit').addEventListener('click', () => {\n            this.geocoder = new google.maps.Geocoder;\n\n            let geo_input = document.getElementById('latlng') as HTMLInputElement;\n            if(!geo_input.value){\n                window.alert('Please enter a valid location or coordinates to add a new hive.');\n                return;\n            }\n\n            var latlngStr = geo_input.value.split(',', 2);\n            var latlng = {lat: parseFloat(latlngStr[0]), lng: parseFloat(latlngStr[1])};\n\n            this.geocoder.geocode({'location': latlng}, (results, status) => {\n                var status_string: string = String(status);\n                if (status_string === 'OK') {\n                  if (results[1]) {\n                    this.gmap.setZoom(12);\n                    this.gmap.setCenter(latlng);\n                    this.map.addBeehive(new Location(parseFloat(latlngStr[0]), parseFloat(latlngStr[1])));\n                  } else {\n                    window.alert('No results found.');\n                  }\n                } else {\n                  window.alert('Geocoder failed due to: ' + status);\n                }\n            });\n        });\n\n        document.getElementById('legacy-checkbox').addEventListener('click', () => {\n            let label = document.getElementById('legacy-label') as HTMLElement;\n            label.classList.toggle('legacy-mode');\n            if (label.classList.contains('legacy-mode')) {\n                this.gmap.addListener('click', (event: google.maps.MouseEvent) => {\n                    this.map.addBeehive(new Location(event.latLng.lat(), event.latLng.lng()));\n                    this.gmap.setCenter({lat: event.latLng.lat(), lng: event.latLng.lng()});\n                });\n            }else {\n                google.maps.event.clearListeners(this.gmap, 'click');\n            }\n        });\n\n        google.maps.event.addListenerOnce(this.gmap, 'idle', () => {\n            this.map.initMap(<IMapOptions>{ gmap: this.gmap });\n        });\n\n    }\n}\n","import {Util, Location} from './app.ts';\nimport {Map} from './map.ts';\n\nimport * as ko from 'knockout';\n\nexport interface IHiveOptions {\n  map: Map;\n  center: Location;\n  steps: number;\n  index: number;\n}\nexport class Hive {\n  private options: IHiveOptions;\n  private mapObject: google.maps.Polygon;\n  public isActive: KnockoutObservable<boolean>;\n  private activeListener: google.maps.MapsEventListener;\n\n  get steps(): number {\n    return this.options.steps;\n  }\n\n  constructor(options: IHiveOptions) {\n    this.options = options;\n    this.isActive = ko.observable(false);\n\n    let center = this.options.center.getLatLng();\n    let radius = Util.getHiveRadius(this.options.steps);\n\n    let computeOffset = google.maps.geometry.spherical.computeOffset;\n\n    let hexPoints: google.maps.LatLng[] = [\n      computeOffset(center, radius, 30),\n      computeOffset(center, radius, 90),\n      computeOffset(center, radius, 150),\n      computeOffset(center, radius, 210),\n      computeOffset(center, radius, 270),\n      computeOffset(center, radius, 330)\n    ];\n\n    let hex = new google.maps.Polygon({\n      paths: hexPoints,\n      fillOpacity: 0.3,\n      strokeWeight: 1,\n      zIndex: 2,\n    });\n\n    this.mapObject = hex;\n    this.toggleActive();\n    this.options.map.addMapObject(hex);\n  }\n\n  public reset(): void {\n    this.mapObject = this.options.map.removeMapObject(this.mapObject) as google.maps.Polygon;\n  }\n\n  public toggleActive(): void {\n    this.isActive(!this.isActive());\n    this.mapObject.set('fillColor', this.isActive() ? '#0F0' : '#F00');\n  }\n\n  public addListener(): void {\n    this.activeListener = google.maps.event.addListener(this.mapObject, 'click', () => this.toggleActive());\n  }\n\n  public removeListener(): void {\n    this.activeListener.remove();\n  }\n\n  public getCenter(): Location {\n    return this.options.center;\n  }\n}\n","import {config} from '../config.ts';\nimport {Util, Location} from './app.ts';\nimport {IBeehiveOptions, Beehive} from './beehive.ts';\nimport * as $ from 'jquery';\nimport {ViewModel} from './viewModel.ts';\nimport {Hive} from './hive.ts';\n\nimport * as ko from 'knockout';\nimport * as _ from 'lodash';\n\nexport interface IMapOptions {\n  gmap: google.maps.Map;\n}\n\nexport class Map {\n  private options: IMapOptions;\n  private beehives: KnockoutObservableArray<Beehive>;\n  private activeBeehive: Beehive;\n  private isEditingHives: boolean;\n  private steps: number;\n  public activeHives: KnockoutComputed<Hive[]>;\n\n  constructor () {\n    this.beehives = ko.observableArray([]);\n    this.activeBeehive = null;\n\n    this.steps = config.steps;\n\n    this.activeHives = ko.computed(() => this.getActiveHives());\n  }\n\n  public initMap(options: IMapOptions): void {\n    this.options = options;\n    let sliderOptions = $('#beehive-control .slider').data('zfPlugin').options;\n    sliderOptions.end = config.maxSteps;\n    sliderOptions.initialStart = config.steps;\n\n    $('#custom-map-controls').show();\n    Foundation.reInit(['slider']);\n\n    $('#beehive-control .slider').on('moved.zf.slider', (e) => this.changeSteps(e));\n    $('#remove').on('click', () => this.removeActiveHive());\n    $('#edit-hives').on('click', () => this.editHives());\n    $('#generate-ui-wrapper').on('open.zf.reveal', () => {\n      _.forEach($('input,select,textarea', '#generate-ui'), (e) => $('#generate-ui').foundation('validateInput', $(e)));\n    });\n    let vm = new ViewModel({map: this});\n    ko.applyBindings(vm, document.getElementsByTagName('body')[0]);\n  }\n\n  public addBeehive(location: Location): void {\n    let beehive = new Beehive(<IBeehiveOptions>{ map: this, steps: this.steps, leaps: config.leaps, center: location });\n    this.beehives.push(beehive);\n    $('#script-options').show();\n  }\n\n  public addMapObject(mapObject: google.maps.MVCObject): void {\n      mapObject.set('map', this.options.gmap);\n  }\n\n  public removeMapObject(mapObject: google.maps.MVCObject): google.maps.MVCObject {\n      mapObject.set('map', null);\n      mapObject = null;\n      return mapObject;\n  }\n\n  public addListener(mapObject: google.maps.MVCObject, eventName: string, handler: (...args: any[]) => void): void {\n    google.maps.event.addListener(mapObject, eventName, handler);\n  }\n\n  private changeSteps(event: JQueryEventObject): void {\n    this.steps = Number($('#steps').val());\n\n    if (this.activeBeehive !== null) {\n      this.activeBeehive.resize(this.steps);\n      $('#script-options').hide();\n   }\n  }\n  private removeActiveHive(): void {\n    if (this.activeBeehive !== null) {\n      this.activeBeehive.reset(true);\n      this.beehives.splice(this.beehives.indexOf(this.activeBeehive), 1);\n      this.activeBeehive = null;\n      $('#remove').hide();\n\n      if (this.beehives().length === 0) {\n        $('#script-options').hide();\n      }\n    }\n  }\n\n  public setActiveBeehive(beehive: Beehive): void {\n    if (this.activeBeehive !== null) {\n      this.activeBeehive.disableActive();\n    }\n    if (beehive !== null) {\n      $('#remove').show();\n      $('#edit-hives').show();\n    } else {\n      $('#remove').hide();\n      $('#edit-hives').hide();\n    }\n    this.activeBeehive = beehive;\n  }\n\n  public editHives(): void {\n    this.activeBeehive.editHives();\n  }\n\n  private getActiveHives(): Hive[] {\n    return _.flatten(_.map(this.beehives(), (b) => b.activeHives()));\n  }\n}\n","import {Map} from './map.ts';\nimport {Hive} from './hive.ts';\nimport {ICommandTemplate, config} from '../config.ts';\n\nimport * as $ from 'jquery';\nimport * as ko from 'knockout';\nimport * as _ from 'lodash';\n\nexport interface IViewModelOptions {\n    map: Map;\n}\nexport class ViewModel {\n    private options: IViewModelOptions;\n    public activeHives: KnockoutObservable<Hive[]>;\n    public os: KnockoutObservable<string>;\n    public accountsPerHive: KnockoutObservable<number>;\n    public accountDirectory: KnockoutObservable<string>;\n    public rocketmapDirectory: KnockoutObservable<string>;\n    public scriptDelay: KnockoutObservable<number>;\n    public filename: KnockoutObservable<string>;\n\n    public serverCheckbox: KnockoutObservable<boolean>;\n    public serverNoPokemon: KnockoutObservable<boolean>;\n    public serverNoGyms: KnockoutObservable<boolean>;\n    public serverNoPokestops: KnockoutObservable<boolean>;\n    public serverSearchControl: KnockoutObservable<boolean>;\n    public serverNoFixedLocation: KnockoutObservable<boolean>;\n    public serverOptions: KnockoutComputed<string>;\n\n    public alarmCheckbox: KnockoutObservable<boolean>;\n    public alarmConfig: KnockoutObservable<boolean>;\n    public alarmHost: KnockoutObservable<boolean>;\n    public alarmPort: KnockoutObservable<boolean>;\n    public alarmConfigValue: KnockoutObservable<string>;\n    public alarmHostValue: KnockoutObservable<string>;\n    public alarmPortValue: KnockoutObservable<number>;\n    public alarmOptions: KnockoutComputed<string>;\n\n    public webhookCheckbox: KnockoutObservable<boolean>;\n    public snCheckbox: KnockoutObservable<boolean>;\n    public webhookValue: KnockoutObservable<string>;\n    public snValue: KnockoutObservable<string>;\n    public disableClean: KnockoutObservable<boolean>;\n    public workerNoPokemon: KnockoutObservable<boolean>;\n    public workerNoGyms: KnockoutObservable<boolean>;\n    public workerNoPokestops: KnockoutObservable<boolean>;\n    public workerOptions: KnockoutComputed<string>;\n\n    private windowsTemplates: Templates;\n    private linuxTemplates: Templates;\n    private screenTemplates: Templates;\n\n    public activeTemplates: KnockoutObservable<Templates>;\n    public generateScriptPreview: KnockoutComputed<string>;\n\n    private invalidFields: KnockoutObservableArray<string>;\n    private isValid: KnockoutComputed<boolean>;\n\n    constructor(options: IViewModelOptions) {\n        this.options = options;\n        this.activeHives = ko.computed(() => this.getActiveHives());\n        this.rocketmapDirectory = ko.observable(config.rocketmapDirectory);\n\n        this.os = ko.observable(config.os);\n        this.os.subscribe((newValue) => {\n            this.invalidFields([]);\n\n            if (this.os() === 'windows') {\n                $('#rocketmap-directory').removeAttr('data-abide-ignore');\n            }\n            else {\n                $('#rocketmap-directory').attr('data-abide-ignore', '');\n            }\n\n            _.forEach($('input,select,textarea', '#generate-ui'), (e) => $('#generate-ui').foundation('validateInput', $(e)));\n        });\n\n        this.serverCheckbox = ko.observable($('#serverCheckbox').is(':checked'));\n        this.serverNoPokemon = ko.observable($('#no-pokemon').is(':checked'));\n        this.serverNoGyms = ko.observable($('#no-gyms').is(':checked'));\n        this.serverNoPokestops = ko.observable($('#no-pokestops').is(':checked'));\n        this.serverSearchControl = ko.observable($('#search-control').is(':checked'));\n        this.serverNoFixedLocation = ko.observable($('#no-fixed-location').is(':checked'));\n        this.serverOptions = ko.computed(() => this.getServerOptions().toString());\n\n        this.alarmCheckbox = ko.observable($('#alarmCheckbox').is(':checked'));\n        this.alarmConfig = ko.observable($('#alarm-config').is(':checked'));\n        this.alarmHost = ko.observable($('#alarm-host').is(':checked'));\n        this.alarmPort = ko.observable($('#alarm-port').is(':checked'));\n        this.alarmConfigValue = ko.observable('custom-alarms.json');\n        this.alarmHostValue = ko.observable('127.0.0.1');\n        this.alarmPortValue = ko.observable(4000);\n        this.alarmOptions = ko.computed(() => this.getAlarmOptions().toString());\n\n        this.accountsPerHive = ko.observable(0);\n        this.accountDirectory = ko.observable(config.accountDirectory);\n        this.scriptDelay = ko.observable(config.scriptDelay);\n\n        this.webhookCheckbox = ko.observable($('#webhook-checkbox').is(':checked'));\n        this.snCheckbox = ko.observable($('#sn-checkbox').is(':checked'));\n        this.disableClean = ko.observable($('#disable-clean').is(':checked'));\n        this.webhookValue = ko.observable('http://127.0.0.1:4000');\n        this.snValue = ko.observable('HIVE{index}');\n        this.workerNoPokemon = ko.observable($('#worker-no-pokemon').is(':checked'));\n        this.workerNoGyms = ko.observable($('#worker-no-gyms').is(':checked'));\n        this.workerNoPokestops = ko.observable($('#worker-no-pokestops').is(':checked'));\n        this.workerOptions = ko.computed(() => this.getWorkerOptions().toString());\n\n        this.windowsTemplates = new Templates(config.windowsTemplates);\n        this.linuxTemplates = new Templates(config.linuxTemplates);\n        this.activeTemplates = ko.computed(() => this.getActiveTemplates());\n\n        this.generateScriptPreview = ko.computed(() => this.generateScriptOutput(true).replace(/\\n/g, '<br />'));\n\n        this.invalidFields = ko.observableArray([]);\n        this.isValid = ko.computed(() => this.invalidFields().length === 0);\n        this.isValid.subscribe((newValue) => {\n            newValue ? $('#download').show() : $('#download').hide();\n        });\n        if (this.isValid) {\n            $('#download').show();\n        }\n\n        $(document).on('valid.zf.abide invalid.zf.abide', ((e) => this.handleFormInputValidation(e)));\n        $(document).on('formvalid.zf.abide forminvalid.zf.abide', ((e) => this.handleFormValidation(e)));\n    }\n\n    private handleFormInputValidation(e: JQueryEventObject): void {\n        let name = $(e.target).attr('name');\n        let existingIndex = this.invalidFields.indexOf(name);\n        if (e.type === 'valid') {\n            if (existingIndex >= 0) {\n                this.invalidFields.splice(existingIndex, 1);\n            }\n        }\n        else {\n            if (existingIndex < 0) {\n                this.invalidFields.push(name);\n            }\n        }\n    }\n    private handleFormValidation(e: JQueryEventObject): void {\n        if (e.type === 'valid') {\n            this.invalidFields([]);\n        }\n    }\n\n    private getActiveHives(): Hive[] {\n        return this.options.map.activeHives();\n    }\n\n    private getActiveTemplates(): Templates {\n        return this.os() === 'windows' ? this.windowsTemplates : this.linuxTemplates;\n    }\n\n    private getServerOptions(): String {\n        let serverOptions = '';\n        if (this.serverCheckbox) {\n            let np = this.serverNoPokemon() ? '-np ' : '';\n            let ng = this.serverNoGyms() ? '-ng ' : '';\n            let nk = this.serverNoPokestops() ? '-nk ' : '';\n            let sc = this.serverSearchControl() ? '-sc ' : '';\n            let nfl = this.serverNoFixedLocation() ? '-nfl' : '';\n            serverOptions = np + ng + nk + sc + nfl;\n        } else {\n            serverOptions = '';\n        }\n        return serverOptions\n    }\n\n    private getAlarmOptions(): String {\n        let alarmOptions = '';\n        if (this.alarmCheckbox) {\n            let ac = (this.alarmConfig() && this.alarmConfigValue()) ? '-a ' + this.alarmConfigValue().toString() : '';\n            let ah = (this.alarmHost() && this.alarmHostValue()) ? ' -H ' + this.alarmHostValue().toString() : '';\n            let ap = (this.alarmPort() && this.alarmPortValue()) ? ' -P ' + this.alarmPortValue().toString() : '';\n            alarmOptions = ac + ah + ap;\n        } else {\n            alarmOptions = '';\n        }\n        return alarmOptions\n    }\n\n    private getWorkerOptions(): String {\n        let workerOptions = '';\n            let sn = (this.snCheckbox() && this.snValue()) ? '-sn ' + this.snValue().toString() : '';\n            let wh = (this.webhookCheckbox() && this.webhookValue()) ? '-wh \"' + this.webhookValue().toString() + '\"': '';\n            let dc = this.disableClean() ? ' --disable-clean ' : '';\n            let wnp = this.workerNoPokemon() ? ' -np ' : '';\n            let wng = this.workerNoGyms() ? ' -ng ' : '';\n            let wnk = this.workerNoPokestops() ? ' -nk ' : '';\n            workerOptions = sn + dc + wh + wnp + wng + wnk;\n\n        return workerOptions\n    }\n\n    public generateScriptOutput(isPreview: boolean = true): string {\n        let templates = this.activeTemplates();\n        let hives = this.activeHives();\n        if (hives.length <= 0) { return ''; }\n        let sOptions = this.serverOptions();\n        let aOptions = this.alarmOptions();\n        let wOptions = this.workerOptions();\n\n        let setupScript = `${templates.setup.value()}\n`;\n        let serverScript = this.serverCheckbox() === false ? '' : `${this.replaceVariables(templates.server.value(), {\n            'rocketmap-directory': this.rocketmapDirectory(),\n            location: hives[0].getCenter().toString(),\n            'server-options': sOptions\n        })}\n`;\n        let alarmScript = this.alarmCheckbox() === false ? '' : `${this.replaceVariables(templates.alarm.value(), {\n            'alarm-options': aOptions\n        })}\n`;\n\n        let workerScript = '';\n        for (let i = 0; i < (isPreview ? 1 : hives.length); i++) {\n            let sd = i < (hives.length - 1) ? this.scriptDelay() : 0;\n            workerScript += `${this.replaceVariables(templates.worker.value(), {\n                'rocketmap-directory': this.rocketmapDirectory(),\n                'account-directory': this.accountDirectory(),\n                location: hives[i].getCenter().toString(),\n                steps: hives[i].steps,\n                workers: this.accountsPerHive(),\n                'worker-options': wOptions,\n                index: i + 1\n            })}\n`;\n          if (sd > 0) {\n              workerScript += `${this.replaceVariables(templates.delay.value(), {\n                  'script-delay': sd\n              })}\n`;\n          }\n        }\n\n        return setupScript + serverScript + alarmScript + workerScript;\n    }\n\n    private replaceVariables(text: string, variables: any): string {\n        _.forOwn(variables, (value, key) => text = text.replace(new RegExp(`{${key}}`, 'g'), value));\n\n        return text;\n    }\n\n    public downloadFile (): void {\n        let script = this.generateScriptOutput(false);\n        this.downloadScript(script, this.activeTemplates().filename.value());\n    }\n\n    public updateAPH (): void {\n        $('#workers').trigger('change');\n    }\n\n    public coordsFile (): void {\n        let script = _.join(_.map(this.activeHives(), (h) => h.getCenter().toString()), '\\n');\n        this.downloadScript(script, 'coords.txt');\n    }\n\n    public downloadScript(script: string, filename: string): void {\n        let blob = new Blob([script], { type: 'text/plain' });\n        let url = window.URL.createObjectURL(blob);\n        let a = $('<a>', { style: 'display: none;', download: filename, href: url });\n\n        a.on('click', () => {\n            setTimeout(() => {\n                window.URL.revokeObjectURL(url);\n                a.remove();\n            }, 50);\n        });\n\n        $('#generate-ui').append(a);\n        a[0].dispatchEvent(new MouseEvent('click'));\n    }\n}\n\nexport class Template {\n    public value: KnockoutObservable<string>;\n    public isDirty: KnockoutObservable<boolean>;\n\n    constructor(public defaultValue: string) {\n        this.value = ko.observable(defaultValue);\n        this.isDirty = ko.observable(false);\n\n        this.value.subscribe((newValue) => this.isDirty(true));\n    }\n}\n\nexport class Templates {\n  public setup: Template;\n  public alarm: Template;\n  public server: Template;\n  public worker: Template;\n  public delay: Template;\n  public filename: Template;\n\n  constructor(defaults: ICommandTemplate) {\n      this.setup = new Template(defaults.setup);\n      this.alarm = new Template(defaults.alarm);\n      this.server = new Template(defaults.server);\n      this.worker = new Template(defaults.worker);\n      this.delay = new Template(defaults.delay);\n      this.filename = new Template(defaults.filename);\n  }\n}\n","export class config {\n  public static googleMapsKey: string = 'AIzaSyDzl3LF54-nmF2Z8G4AhuiMLw_slLxsYC4';\n  public static latitude: number = 37.09024;\n  public static longitude: number = -95.712891;\n  public static zoom: number = 5;\n  public static leaps: number = 2;\n  public static steps: number = 6;\n  public static maxSteps: number = 100;\n\n  public static os: string = 'windows';\n  public static scriptDelay: number = 300;\n  public static rocketmapDirectory: string = 'D:\\\\RocketMap';\n  public static accountDirectory: string = 'workers/';\n\n  public static windowsTemplates: ICommandTemplate = {\n    setup: 'taskkill /IM python.exe /F',\n    alarm: 'Start \"Alarm\" /d {rocketmap-directory} /MIN python.exe Tools/PokeAlarm/start_pokealarm.py {alarm-options}',\n    server: 'Start \"Server\" /d {rocketmap-directory} /MIN python.exe runserver.py -os -l \"{location}\" {server-options}',\n    worker: 'Start \"Worker{index}\" /d {rocketmap-directory} /MIN python.exe runserver.py -ns -ac {account-directory}hive{index}.csv -l \"{location}\" {worker-options} -st {steps} -w {workers}',\n    delay: 'ping 127.0.0.1 -n {script-delay} > null',\n    filename: 'start-scan.bat'\n  };\n\n  public static linuxTemplates: ICommandTemplate = {\n    setup: '#!/usr/bin/env bash',\n    alarm: 'screen -d -m -S ALARM python Tools/PokeAlarm/start_pokealarm.py {alarm-options}',\n    server: 'screen -d -m -S MAP python runserver.py -os -l \\'{location}\\' {server-options}',\n    worker: 'screen -d -m -S HIVE{index} python runserver.py -ns -ac {account-directory}hive{index}.csv -l \\'{location}\\' {worker-options} -st {steps} -w {workers}',\n    delay: 'sleep {script-delay}',\n    filename: 'start-scan.sh'\n  };\n}\n\nexport interface ICommandTemplate {\n  setup: string;\n  alarm: string;\n  server: string;\n  worker: string;\n  delay: string;\n  filename: string;\n}\n"],"sourceRoot":"/source/"}